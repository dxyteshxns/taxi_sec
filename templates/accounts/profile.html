{% extends 'base.html' %}

{% block title %}Profile - Taxi Service{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <h2 class="mb-4">My Profile</h2>
            
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-person"></i> User Information</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Username:</div>
                        <div class="col-sm-8">{{ user.username }}</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Email:</div>
                        <div class="col-sm-8">{{ user.email }}</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Phone:</div>
                        <div class="col-sm-8">{{ user.phone|default:"Not provided" }}</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Role:</div>
                        <div class="col-sm-8">
                            <span class="badge bg-{% if user.is_driver %}info{% else %}success{% endif %}">
                                {{ user.get_role_display }}
                            </span>
                        </div>
                    </div>
                    <a href="{% url 'accounts:update_info' %}" class="btn btn-primary">
                        <i class="bi bi-pencil"></i> Edit Information
                    </a>
                </div>
            </div>

            {% if user.is_driver %}
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-car-front"></i> Driver Profile</h5>
                </div>
                <div class="card-body">
                    {% if user.driver_profile.photo %}
                    <div class="text-center mb-3">
                        <img src="{{ user.driver_profile.photo.url }}" alt="Driver Photo" 
                             class="img-thumbnail" style="max-width: 200px;">
                    </div>
                    {% endif %}
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">License Number:</div>
                        <div class="col-sm-8">{{ user.driver_profile.license_number }}</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Car Model:</div>
                        <div class="col-sm-8">{{ user.driver_profile.car_model }}</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Car Number:</div>
                        <div class="col-sm-8">{{ user.driver_profile.car_number }}</div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Rating:</div>
                        <div class="col-sm-8">
                            <span class="text-warning">
                                {% for i in "12345" %}
                                    {% if forloop.counter <= user.driver_profile.rating %}
                                        <i class="bi bi-star-fill"></i>
                                    {% else %}
                                        <i class="bi bi-star"></i>
                                    {% endif %}
                                {% endfor %}
                            </span>
                            ({{ user.driver_profile.rating }})
                        </div>
                    </div>
                    {% if user.driver_profile.description %}
                    <div class="row mb-3">
                        <div class="col-sm-4 fw-bold">Description:</div>
                        <div class="col-sm-8">{{ user.driver_profile.description }}</div>
                    </div>
                    {% endif %}
                    <a href="{% url 'accounts:profile_update' %}" class="btn btn-info text-white">
                        <i class="bi bi-pencil"></i> Edit Driver Profile
                    </a>
                    <a href="{% url 'vehicles:vehicle_list' %}" class="btn btn-secondary">
                        <i class="bi bi-list"></i> My Vehicles
                    </a>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
